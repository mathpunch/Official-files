
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>hi</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>
<style>
:root {
  --glass: rgba(24,28,38,0.96);
  --stroke: rgba(255,255,255,0.9);
  --glow: rgba(120,170,255,0.7);
}

* { box-sizing: border-box; }

body {
  margin: 0;
  height: 100vh;
  background: radial-gradient(circle at top, #0b1220, #05080f);
  font-family: system-ui, sans-serif;
  color: white;
  overflow: hidden;
}

/* MAIN IFRAME */
#mainFrame {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  border: none;
}

/* USER ID GATE */
#idGate {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.85);
  display: grid;
  place-items: center;
  z-index: 9999;
}

#idBox {
  background: #111;
  padding: 24px;
  border-radius: 14px;
  width: 300px;
  text-align: center;
}

#idBox input {
  width: 100%;
  padding: 10px;
  border-radius: 8px;
  border: none;
  margin-top: 12px;
}

#idBox button {
  margin-top: 12px;
  width: 100%;
  padding: 10px;
  border-radius: 8px;
  border: none;
  background: #4da3ff;
  color: black;
  font-weight: bold;
  cursor: pointer;
}


.hover-zone {
  position: fixed;
  top: 16px;
  left: 16px;
  z-index: 20;
}

.morph {
  width: 54px;
  height: 54px;
  border-radius: 16px;
  background: rgba(255,255,255,0.08);
  backdrop-filter: blur(14px);
  border: 1px solid rgba(255,255,255,0.16);
  overflow: hidden;
  cursor: pointer;
  transition: all 0.38s cubic-bezier(.2,.8,.2,1);
}

.hover-zone:hover .morph {
  width: 270px;
  height: 360px;
  border-radius: 22px;
  background: var(--glass);
  box-shadow: 0 0 28px rgba(120,170,255,0.28);
}

.hover-btn {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  transition: opacity 0.22s ease, transform 0.28s ease;
}

.hover-zone:hover .hover-btn {
  opacity: 0;
  transform: scale(0.82);
  pointer-events: none;
}

.panel {
  position: absolute;
  inset: 0;
  padding: 14px;
  opacity: 0;
  transform: translateY(10px) scale(0.98);
  pointer-events: none;
  transition: opacity 0.25s ease 0.12s, transform 0.25s ease 0.12s;
}

.hover-zone:hover .panel {
  opacity: 1;
  transform: none;
  pointer-events: auto;
}

.divider {
  height: 1px;
  background: rgba(255,255,255,0.08);
  margin: 12px 0;
}

.item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 12px;
  border-radius: 14px;
  cursor: pointer;
  transition: background 0.18s ease;
}

.item:hover {
  background: rgba(255,255,255,0.1);
}

.item.active {
  background: rgba(120,170,255,0.18);
  box-shadow: inset 0 0 0 1px var(--glow);
}

.item i {
  font-size: 18px;
}
</style>
</head>

<body>

<div id="idGate">
  <div id="idBox">
    <h3>Who Are You</h3>
    <input id="userIdInput" placeholder="JohnBilly">
    <button onclick="submitID()">Continue</button>
  </div>
</div>

<iframe id="mainFrame" src="https://sea-math-official.neocities.org/home"></iframe>

<div class="hover-zone">
  <div class="morph">

    <div class="hover-btn">
      <img src="/logo.png" width="26" height="26">
    </div>

    <div class="panel">
      <div class="item active" onclick="loadPage(this,'https://sea-math-official.neocities.org/home')">
        <i class="fa-solid fa-house"></i> Home
      </div>

      <div class="divider"></div>

      <div class="item" onclick="alert('News clicked')">
        <i class="fa-solid fa-newspaper"></i> News
      </div>

      <div class="divider"></div>

      <div class="item" onclick="loadPage(this,'select.html')">
        <i class="fa-solid fa-gamepad"></i> Courses
      </div>

      <div class="divider"></div>

      <div class="item" onclick="loadPage(this,'chat.html')">
        <i class="fa-solid fa-comment-dots"></i> Chat
      </div>

      <div class="divider"></div>

      <div class="item" onclick="loadPage(this,'/Wave.html')">
        <i class="fa-solid fa-music"></i> Wave
      </div>
    </div>

    </div>

</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getFirestore, doc, getDoc, setDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCK730UgPUCtFKLACzSgGAAC1NK7EGrwhI",
  authDomain: "nannin-2f398.firebaseapp.com",
  projectId: "nannin-2f398"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.submitID = async () => {
  const name = userIdInput.value.trim();

  if (!/^[a-zA-Z0-9 ]{2,20}$/.test(name)) {
    alert("Name must be 2â€“20 letters or numbers");
    return;
  }

  localStorage.setItem("USER_NAME", name);
  await checkUser(name);
};

async function checkUser(name) {
  const ref = doc(db, "users", name);
  const snap = await getDoc(ref);

  if (!snap.exists()) {
    await setDoc(ref, {
      name: name,
      banned: false,
      createdAt: serverTimestamp()
    });
  }

  const data = (await getDoc(ref)).data();
  if (data.banned) {
    document.body.innerHTML =
      "<h1 style='text-align:center;margin-top:20%'>You are banned.</h1>";
    return;
  }

  idGate.remove();
}

const saved = localStorage.getItem("USER_NAME");
if (saved) checkUser(saved);

window.loadPage = (el, url) => {
  document.querySelectorAll(".item").forEach(i => i.classList.remove("active"));
  el.classList.add("active");
  mainFrame.src = url;
};
</script>

</body>
</html>
